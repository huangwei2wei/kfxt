<script language="javascript" src="<!--{$__JS__}-->/Libs/jquery.form.js"></script>
<script language="javascript">
function onSubmit(){
	var serverList=$(":checkbox[name='server_ids[]']");
	$.each(serverList,function(i,n){
		if(n.checked==true){
			var curLi=$("#server_"+n.value);
			$("#form").ajaxSubmit({
				dataType:'json',
				data:{server_id:n.value},
				success:function(dataResult){
					var fontColor=(dataResult.status==1)?'#00cc00':'#ff0000';
					curLi.after("<font color='"+fontColor+"'>"+dataResult.msg+"</font>");
				}
			});
		}
	});

}
</script>
<form action="<!--{$ajax}-->" method="post" id="form">
<!--{if $tplServerSelect}-->
<!--{include file=$tplServerSelect}-->
<!--{/if}-->
<link href="<!--{$__JS__}-->/Libs/My97DatePicker/skin/WdatePicker.css" rel="stylesheet" type="text/css">
<script language="javascript" src="<!--{$__JS__}-->/Libs/My97DatePicker/WdatePicker.js"></script>
<script language="javascript">
$(function(){
	$.formValidator.initConfig({formid:"form",onerror:function(){return false;}});
	$("#title").formValidator().inputValidator({min:1,empty:{leftempty:false,rightempty:false,emptyerror:"<!--{'752F8926DB21639D9F8ECDC7BF1D7159'|lang}-->"},onerror:"<!--{'1C556BF4A724BF1B83C6FC64D44DE0B2'|lang}-->,<!--{'43D586CD6CF1A512C0BCB85ED9EFDE51'|lang}-->"});
	$("#content").formValidator().inputValidator({min:1,empty:{leftempty:false,rightempty:false,emptyerror:"<!--{'752F8926DB21639D9F8ECDC7BF1D7159'|lang}-->"},onerror:"<!--{'81B8114F80F252C34993100C3BD6F046'|lang}-->,<!--{'43D586CD6CF1A512C0BCB85ED9EFDE51'|lang}-->"});
	$("#interval").formValidator({onshow:"<!--{'62DF1C363CC3B9F23706E4504BC0EC25'|lang}-->",oncorrect:"<!--{'315F61935B8933FF105D5FA610D202C3'|lang}-->"}).regexValidator({regexp:"intege1",datatype:"enum",onerror:"<!--{'49D109F09975997457A4623EEE9A558F'|lang}-->"});
})

function fontStyle(color,b,em){
	var font1='<font color="'+color+'">';
	var font2='</font>';
	var b1='<b>';
	var b2='</b>';
	var em1='<em>';
	var em2='</em>';
	if(!color){
		font1 = font2 = '';
	}
	if(!b){
		b1 = b2 = '';
	}
	if(!em){
		em1 = em2 = '';
	}
	var obj = $('#content');
	obj.val(obj.val()+font1+b1+em1+'<!--{'4F6A3C19F9DCAC1C9A46E623609E7638'|lang}-->'+em2+b2+font2);
	view()
}
function linkAdd(){
	var obj = $('#content');
	obj.val(obj.val()+'<a href="event:<!--{'6107B3C4FD8587589210CB9FE2FCDAD9'|lang}-->"><!--{'A11CC7A65B27F3993D58438D275F3447'|lang}--></a>');
	view()
}
function view(){
	$('#view').html($('#content').val());
}
</script>
<fieldset>
<legend><!--{'0B76EC0687E2B68836E168D5F28D2C03'|lang}--></legend>
    <table width="100%" border="0" cellpadding="3">
      <tr>
        <th scope="row"><!--{'22F454634D216B2787C24A90EFD297AA'|lang}--></th>
        <td><input type="text" class="text" name="title" id="title" /><div id="titleTip"></div></td>
      </tr>
      <tr>
        <th scope="row"><!--{'0DFFC10FD1EB0371106F6CEC88009025'|lang}--></th>
        <td>
        
        <div>
				<!--{'6B36C6F7EC834692EC6C8E3816349FDD'|lang}--><select id="color_select">
                	<option value=""><!--{'18C63459A2C069022C7790430F761214'|lang}--></option>
                	<option value="FF0000"><!--{'52636511861A0E08CBE6A0EB1C27D816'|lang}--></option>
                    <option value="0000FF"><!--{'9C9AABAB3F7627FF4BB224B2738B26EA'|lang}--></option>
                    <option value="00FF00"><!--{'B2C712C788D3A143206EEE22FE24D9F1'|lang}--></option>
                    <option value="FFFF00"><!--{'DDB86DD31CE7580FE0C51651B28BA77D'|lang}--></option>
                    <option value="FF00FF"><!--{'E1E14BD3B8FA4E5F5F4D84AC34E9976F'|lang}--></option>
                </select>
                <!--{'3B8A43ACEE5A0B69F9323D4A75EC7CEB'|lang}--><input id="b_select" type="checkbox" value="b" />
                <!--{'F6F8EA0815881FE9A4AA9352A7FE2299'|lang}--><input id="em_select" type="checkbox" value="em" />
                <input class="btn-blue" type="button" value="<!--{'B58C7549C0246C55B9CAC96383200338'|lang}-->" onclick="fontStyle($('#color_select').val(),$('#b_select').attr('checked'),$('#em_select').attr('checked'));" />
                <input class="btn-blue" type="button" value="<!--{'C2942C06B212AD838665B9A93265A751'|lang}-->" onclick="linkAdd();" />
       		</div>
        	<textarea name="content" id="content" style="width:600px; height:200px;" onkeyup="view();"><!--{$selected.title|htmlspecialchars}--></textarea><div id="titleTip"></div>
            <div>
            	<input class="btn-blue" type="button" value="<!--{'645DBC5504E722A30896486085A06B32'|lang}-->" onclick="view();" />
                <div id="view"></div>
            </div>
        
        </td>
      </tr>
      <tr>
        <th scope="row"><!--{'592C59589144DDC68D05D528DA17DCDC'|lang}--></th>
        <td><input type="text" class="text" name="begin" value="<!--{$smarty.now|date_format:'%Y-%m-%d %H:%M:%S'}-->" onFocus="WdatePicker({startDate:'<!--{$smarty.now|date_format:'%Y-%m-%d %H:%M:%S'}-->',dateFmt:'yyyy-MM-dd HH:mm:ss',alwaysUseStartDate:true})"/>
        	<!--{'4C82AEABE39C801738069F81294C24B0'|lang}-->ï¼š <font color="#FF0000"><!--{$smarty.now|date_format:'%Y-%m-%d %H:%M:%S'}--></font>
        </td>
      </tr>
      <tr>
        <th scope="row"><!--{'F782779E8B5D709462C8E71E0D9019F2'|lang}--></th>
        <td><input type="text" class="text" name="end" value="<!--{$smarty.now|strtotime:'+1 week'}-->" onFocus="WdatePicker({startDate:'<!--{$smarty.now|strtotime:'+1 week'}-->',dateFmt:'yyyy-MM-dd HH:mm:ss',alwaysUseStartDate:true})"/></td>
      </tr>
      <tr>
        <th scope="row"><!--{'E1317F673E37DABE7AFF7C31134898F6'|lang}--></th>
        <td><input type="text" class="text" name="interval" id="interval" /> <!--{'3A17B7352E715D90E4D3CA3B77A29AB0'|lang}--><div id="intervalTip"></div></td>
      </tr>
      <tr>
        <th scope="row">URL</th>
        <td><input type="text" class="text" name="url" size="80" /></td>
      </tr>
      <tr>
        <th colspan="2" scope="row"><input type="submit" class="btn-blue" onclick="onSubmit();return false;" value="<!--{'939D5345AD4345DBAABE14798F6AC0F1'|lang}-->" /></th>
      </tr>
    </table>
</fieldset>
</form>

